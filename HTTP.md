HTTP - протокол передачи данных, изначально предназначенный для передачи гипертекстовых документов (то есть документов, которые могут содержать ссылки, позволяющие организовать переход к другим документам). Предполагает использование клиент-серверной структуры передачи данных.

**Структура HTTP-сообщения**

Каждое HTTP-сообщение состоит из трёх частей, которые передаются в указанном порядке:

1. Стартовая строка — определяет тип сообщения.
2. Заголовки — характеризуют тело сообщения, параметры передачи и прочие сведения.
3. Тело сообщения — непосредственно данные сообщения. Обязательно должно отделяться от заголовков пустой строкой.

Стартовая строка для запроса: Метод URI HTTP/Версия

Метод - Options, Get, Post, Put, Patch, Delete
URI - определяет путь к запрашиваемому документу

Стартовая строка для ответа: Метод URI HTTP/Версия
Пример: HTTP/1.0 200 OK

Подробное описание протокола: 
1. [wiki](https://ru.wikipedia.org/wiki/HTTP)
2. [habr](https://habr.com/ru/articles/215117/)

### Различие версий

Основная причина появления версий протокала 2 и 3 - скорость:
1. Скорость загрузки страницы в браузере
2. Скорость установления соединения
3. Скорость обмена данными между сервером и страницей
4. Скорость обмена данными между сервисами/микросервисами

Причины, которые замедляют работу протокола 1-ой версии:
1. Блокировка соединения
2. Время на установление соединения
3. Объём обязательных данных

**Блокировка соединения**

*HTTP1 -> HTTP2*

Первая версия протокола http требовала дожидаться получения ответа перед отправлением следующего запроса в рамках одного соединения. Во второй версии протокола - это исправили, соединение может использоваться без ожидания завершения уже отправленного запроса.

*HTTP2 -> HTTP3/QUIC*

Проблема блокировки была решена в версии 2 — но только на уровне http протокола. На транспортном уровне **tcp** она все еще есть в виде обязательного **последовательного** получения пакетов. Поэтому версию 3 собрали на протоколе **udp**, в которой этой особенности нет, и назвали это QUIC.

**Время на установление соединения**

Чтобы передавать данные, клиенту и серверу надо договориться о том, как это будет происходить. Совершить своего рода рукопожатие - [Handshake](https://en.wikipedia.org/wiki/Handshake_\(computing\)). То есть отправить некий вопрос и получить на него ответ, совершив полный "круг" обмена информацией.

*HTTP1 -> HTTP2*

Для того чтобы установить шифрованное соединение и обменяться данными для http1 или http2 нам необходимо сделать от 2х до 3х рукопожатий. Одно рукопожатие для установления tcp соединения, 1 или 2 рукопожатия, в зависимости от версии протокола, для установления шифрованного соединения. Итого 2-3 рукопожатия.  
Так где же улучшение в версии 2?

У каждого соединения есть желтый участок - это установление соединения, включая рукопожатия. То есть на каждое соединение - отдельный набор рукопожатий. В версии 2 - соединение одно.

http1 = кол-во соединений **x** кол-во рукопожатий / 1-[6](https://stackoverflow.com/questions/985431/max-parallel-http-connections-in-a-browser) **x** 2-3 = **2-18**  
http2 = кол-во рукопожатий / **2-3**

*HTTP2 -> HTTP3/QUIC*

В третьей версии, поскольку собрали новый протокол QUIC, обо всём хорошо подумали и рукопожатия свели к одному. В один запрос упаковали установление соединения и установление шифрования.

Плюс в версии 3 при разрыве соединения не нужно устанавливать новое, то есть не будет повторных рукопожатий, так как используется уникальный идентификатор соединения.

http3/quic = **const 1**

**Объём обязательных данных**

Для того, чтобы уменьшить объём по сравнению с первой версией, заголовки стали:
- передавать в **бинарном** виде, а не текстом, как раньше - такой вид удобнее для машины и занимает меньше места;
- сжимать **специальным алгоритмом**, который позволяет не отправлять повторяющиеся части заголовка, заменяя их указателями на уже полученные ранее сервером такие же части.

[Подробное описание различий в версиях](https://habr.com/ru/articles/739166/)



