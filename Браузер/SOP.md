**Same-Origin Policy (Политика одного источника)** — это **механизм безопасности браузеров**, который **ограничивает взаимодействие между документами и скриптами с разных источников (origin)**.

Проще говоря: скрипт, загруженный с одного сайта, **не может читать или изменять данные другого сайта**, если их источники разные.

В браузере политика одного источника реализуется на 3-х уровнях:
1. Изоляция контекста. Если в iframe грузится данные другого источника, то доступ к document с текущего сайта будет запрещён.
2. Работа с заголовками cors
3. Изоляция cookies (атрибут samesite), localStorage, sessionStorage

Same-origin policy обычно контролирует доступ JavaScript кода к содержимому загружаемому между доменами. Т.е. может ограничивать доступ окон и фреймов друг к другу, а также влияет на AJAX-запросы к серверу.

Два URL имеют «одинаковый источник» в том случае, если они имеют совпадающие протокол, домен и порт.

Политика «Одинакового источника» говорит о том, что:
- если у нас есть ссылка на другой объект `window`, например, на всплывающее окно, созданное с помощью `window.open` или на `window` из `<iframe>` и у этого окна тот же источник, то к нему будет полный доступ.
- в противном случае, если у него другой источник, мы не сможем обращаться к его переменным, объекту `document` и так далее. Единственное исключение – объект `location`: его можно изменять (таким образом перенаправляя пользователя). Но нельзя читать `location` (нельзя узнать, где находится пользователь, чтобы не было никаких утечек информации).

Пример с веб-приложением, которое отображает карты. Ваше приложение на `https://mymaps.com` хочет загрузить изображения карт с `https://mapsdata.com`. Без CORS запросы будут заблокированы из-за SOP. Но если `mapsdata.com` включит в ответы заголовки CORS, указывающие, что `https://mymaps.com` разрешен как источник, ваше приложение сможет безопасно загружать и отображать карты.

**Настройка CORS** требует добавления специальных заголовков HTTP к ответам вашего сервера. Например, `Access-Control-Allow-Origin: https://mymaps.com` сообщает браузерам, что запросы от `https://mymaps.com` разрешены. Это как дать ключ от ворот своего двора доверенному соседу, позволяя ему войти, но сохраняя контроль над тем, кто может войти.

CORS действует как контролируемое ослабление политики единого источника